{
  "name": "perps-trader",
  "version": "1.0.0",
  "description": "Lean perpetual futures trading service focused on Hyperliquid",
  "main": "dist/src/main.js",
  "license": "MIT",
  "scripts": {
    "build": "nest build",
    "start:prod": "node dist/src/main.js",
    "start:dev": "nest start --watch",
    "dev": "yarn start:dev",
    "test": "node --max-old-space-size=8192 --expose-gc ./node_modules/.bin/jest --testTimeout=600000 --maxWorkers=3",
    "test:integration": "node --max-old-space-size=8192 --expose-gc ./node_modules/.bin/jest --testTimeout=600000 --maxWorkers=3 --forceExit",
    "test:cleanup": "node scripts/cleanup-test-dbs.js",
    "clean": "rm -rf dist node_modules/.cache && rm -f tsconfig.tsbuildinfo",
    "lint": "eslint \"src/**/*.ts\" -c package.json",
    "lint:fix": "yarn lint --fix",
    "prettier": "prettier -c \"src/**/*.ts\"",
    "prettier:fix": "prettier -w ."
  },
  "dependencies": {
    "@nestjs/common": "^10.0.0",
    "@nestjs/config": "^3.2.1",
    "@nestjs/core": "^10.0.0",
    "@nestjs/event-emitter": "^3.0.1",
    "@nestjs/mongoose": "^10.0.5",
    "@nestjs/platform-express": "^10.0.0",
    "@nestjs/schedule": "^4.0.0",
    "@nestjs/swagger": "^7.3.1",
    "@nestjs/testing": "^10.0.0",
    "@nestjs/throttler": "^5.1.2",
    "axios": "^1.9.0",
    "bignumber.js": "^9.3.1",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.1",
    "crypto-js": "^4.2.0",
    "date-fns": "^4.1.0",
    "dd-trace": "^5.37.1",
    "dotenv": "^16.4.7",
    "hyperliquid": "^1.7.7",
    "mongodb": "^6.16.0",
    "mongoose": "^8.3.1",
    "mongoose-long": "^0.8.0",
    "nest-winston": "^1.10.2",
    "rxjs": "^7.8.2",
    "winston": "^3.17.0",
    "ws": "^8.18.3"
  },
  "devDependencies": {
    "@nestjs/cli": "^10.0.0",
    "@nestjs/schematics": "^10.0.0",
    "@nestjs/testing": "^10.0.0",
    "@types/crypto-js": "^4.2.2",
    "@types/express": "^4.17.17",
    "@types/jest": "^29.5.2",
    "@types/node": "^22.12.0",
    "@types/supertest": "^6.0.0",
    "@types/ws": "^8.18.1",
    "@typescript-eslint/eslint-plugin": "^8.24.1",
    "@typescript-eslint/parser": "^8.24.1",
    "eslint": "8.56.0",
    "eslint-config-airbnb-base": "^15.0.0",
    "eslint-config-airbnb-typescript": "^17.1.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-import": "^2.29.1",
    "eslint-plugin-jest": "^27.6.1",
    "eslint-plugin-prettier": "^5.1.2",
    "jest": "29.7.0",
    "module-alias": "^2.2.3",
    "prettier": "^3.5.1",
    "reflect-metadata": "^0.2.2",
    "source-map-support": "^0.5.21",
    "ts-jest": "^29.2.5",
    "ts-loader": "^9.2.3",
    "ts-node": "^10.9.2",
    "tsconfig-paths": "^4.2.0",
    "typescript": "^5.7.3"
  },
  "jest": {
    "testTimeout": 120000,
    "globalTeardown": "<rootDir>/jest.globalTeardown.js",
    "projects": [
      {
        "displayName": "api",
        "collectCoverageFrom": [
          "**/*.(t|j)s"
        ],
        "moduleFileExtensions": [
          "js",
          "json",
          "ts"
        ],
        "testRegex": ".*\\.spec\\.ts$",
        "transform": {
          "^.+\\.ts$": [
            "ts-jest",
            {
              "tsconfig": "./tsconfig.json"
            }
          ]
        },
        "coverageDirectory": "../coverage",
        "testEnvironment": "node",
        "setupFiles": [
          "<rootDir>/jest.setup.js"
        ],
        "rootDir": "./",
        "roots": [
          "<rootDir>/src/"
        ],
        "moduleNameMapper": {
          "^@perps/(.*)$": "<rootDir>/src/$1",
          "^@perps-app/(.*)$": "<rootDir>/src/app/$1",
          "^@perps-app$": "<rootDir>/src/app",
          "^@perps-shared/(.*)$": "<rootDir>/src/shared/$1",
          "^@perps-shared$": "<rootDir>/src/shared",
          "^@perps-infra/(.*)$": "<rootDir>/src/infrastructure/$1",
          "^@perps-infra$": "<rootDir>/src/infrastructure"
        }
      }
    ]
  },
  "eslintConfig": {
    "root": true,
    "plugins": [
      "prettier",
      "jest"
    ],
    "rules": {
      "prettier/prettier": "error",
      "jest/consistent-test-it": "error",
      "jest/no-commented-out-tests": "error",
      "jest/no-disabled-tests": "error",
      "jest/no-done-callback": "error",
      "jest/no-duplicate-hooks": "error",
      "jest/no-focused-tests": "error",
      "jest/no-identical-title": "error",
      "jest/no-interpolation-in-snapshots": "error",
      "jest/no-large-snapshots": "error",
      "jest/no-restricted-jest-methods": "error",
      "jest/no-test-prefixes": "error",
      "jest/no-test-return-statement": "error",
      "jest/valid-describe-callback": "error",
      "jest/valid-expect": "error",
      "jest/valid-title": "error",
      "@typescript-eslint/interface-name-prefix": "off",
      "@typescript-eslint/explicit-module-boundary-types": "warn",
      "@typescript-eslint/explicit-function-return-type": "warn",
      "@typescript-eslint/no-explicit-any": "warn",
      "@typescript-eslint/naming-convention": "off",
      "@typescript-eslint/no-duplicate-enum-values": "off",
      "no-await-in-loop": "off",
      "import/export": "off",
      "no-underscore-dangle": "off",
      "new-cap": "off",
      "no-restricted-syntax": "off",
      "no-continue": "off",
      "no-plusplus": "off",
      "no-param-reassign": [
        2,
        {
          "props": false
        }
      ],
      "no-useless-constructor": "off",
      "no-async-promise-executor": "error"
    },
    "extends": [
      "prettier",
      "plugin:@typescript-eslint/recommended",
      "plugin:prettier/recommended"
    ],
    "parserOptions": {
      "project": "./tsconfig.json"
    },
    "ignorePatterns": [
      "**/dist"
    ],
    "overrides": [
      {
        "files": [
          "*.spec.ts",
          "**/*.spec.ts"
        ],
        "rules": {
          "@typescript-eslint/no-explicit-any": "off",
          "@typescript-eslint/explicit-function-return-type": "off"
        }
      }
    ]
  },
  "prettier": {
    "singleQuote": true,
    "trailingComma": "all"
  }
}
